---
title: "Accidents in Porto Alegre city"
author: "Guilherme Zanatta Tocchetto"
date: "14 de novembro de 2018"
output:
  pdf_document: default
  html_document: default
---

```{r include=FALSE}
library(readr)
URL <- "http://datapoa.com.br/storage/f/2017-08-03T13%3A19%3A45.538Z/acidentes-2016.csv"
df <- read_delim(URL, delim=";")
df
```

## Introduction

In this study a data set of the poa accidents (generated by the city public transport and circulation company) that occurred in the year of 2016 is analized.

## Which month is the one with more accidents?

For each accident, the dataset provides the month of its occurence, by counting each accident that corresponds to each month it is possible to find out which month more accidents occurred. As we can see in the graph below, the month of March has more accidents than the other months of the year. 
<!--One reason for this may be due to the fact that, in Brazil, just before the end of March it is still summer and there are a great amount of people from the city who does the path city>beach-beach>city, and which may be the cause of the increase in accidents in that month.-->

```{r echo=FALSE}
library(ggplot2);
  ggplot(df,
  aes(MES,..count..)) +
  geom_point(stat = "count", size = 2)+
  scale_x_continuous(breaks = seq(1, 12, by = 1), name ="Month")+
  scale_y_continuous(name ="Number of Accidents", breaks=seq(0,1200,50))+
  labs(title="Number of Accidents Vs Month", 
       subtitle="From datapoa dataset", 
       caption="Traffic Accidents POA")
```


## Is there a specific type of accident that happens more often during the year?

The dataset provides data about the type, the amount and the period of the accidents that occured. By crossing those information we can plot a graph that shows that "Abalroamento" appears to be the most frequent accident in the course of the year.

```{r echo=FALSE}
library(ggplot2);
  ggplot(df,
  aes(MES,..count..)) +
  geom_point(aes(col=TIPO_ACID),stat = "count", size = 1)+
  scale_x_continuous(breaks = seq(1, 12, by = 1), name ="Month")+
  scale_y_continuous(name ="Number of Accidents", breaks=seq(0,1200,50))+
  scale_color_discrete(name="Types of Accidents")+
  labs(title="Number of Accidents Vs Month Vs Type", 
       subtitle="From datapoa dataset", 
       caption="Traffic Accidents POA")
```

## Is there a specific shift of the day with more accidents?
In the dataset, we have access to the shift of the day that each accident occured and knowing that, we can answer the question above. Before ploting the graph, as there are some inconsistencies with some data (values that does not count as "DAY" or "NIGH"), those inconsistencies were removed to generate the graph. According to the generated graph bellow, the shift of the day with more accidents during the year of 2006, is the day-shift.

```{r echo=FALSE}
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
  df%>%filter(!is.na(NOITE_DIA))%>%
  ggplot(aes(NOITE_DIA,..count..))+
  scale_x_discrete(label=c("DAY","NIGHT"))+
  geom_point(stat = "count", size = 3)+
  labs(x="The shift of the day",
       y="Number of Accidents",
       title="Number of Accidents Vs Shift of the Day", 
       subtitle="From datapoa dataset", 
       caption="Traffic Accidents POA")
```